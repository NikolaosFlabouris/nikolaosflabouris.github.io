---
import Layout from "../layouts/Layout.astro";
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
import ResourceCard from "../components/ResourceCard.astro";

const resources = [
  {
    title: "Modern React Patterns",
    description:
      "Comprehensive guide to modern React patterns including hooks, context, and performance optimization techniques.",
    type: "Article",
    url: "https://example.com",
    tags: ["React", "JavaScript", "Frontend"],
  },
  {
    title: "Astro Starter Kit",
    description:
      "A production-ready Astro template with TypeScript, TailwindCSS, and best practices built in.",
    type: "Repository",
    url: "https://github.com",
    tags: ["Astro", "TypeScript", "Template"],
  },
  {
    title: "Docker for Beginners",
    description:
      "Step-by-step tutorial covering Docker fundamentals, container management, and deployment strategies.",
    type: "Tutorial",
    url: "https://example.com",
    tags: ["Docker", "DevOps", "Tutorial"],
  },
  {
    title: "System Design Fundamentals",
    description:
      "Video series explaining core system design concepts, scalability patterns, and architectural trade-offs.",
    type: "Video",
    url: "https://youtube.com",
    tags: ["Architecture", "System Design", "Backend"],
  },
  {
    title: "Vite - Next Gen Build Tool",
    description:
      "Lightning-fast frontend build tool that significantly improves the development experience.",
    type: "Tool",
    url: "https://vitejs.dev",
    tags: ["Build Tool", "JavaScript", "Performance"],
  },
  {
    title: "TypeScript Best Practices",
    description:
      "Essential TypeScript patterns and practices for writing type-safe, maintainable code.",
    type: "Article",
    url: "https://example.com",
    tags: ["TypeScript", "Best Practices", "JavaScript"],
  },
  {
    title: "Kubernetes Deployment Guide",
    description:
      "Complete guide to deploying applications on Kubernetes with examples and troubleshooting tips.",
    type: "Tutorial",
    url: "https://example.com",
    tags: ["Kubernetes", "DevOps", "Cloud"],
  },
  {
    title: "React Testing Library",
    description:
      "Testing utilities that encourage good testing practices for React applications.",
    type: "Tool",
    url: "https://testing-library.com",
    tags: ["Testing", "React", "Quality"],
  },
  {
    title: "Node.js Performance Optimization",
    description:
      "In-depth video covering Node.js performance monitoring, profiling, and optimization techniques.",
    type: "Video",
    url: "https://youtube.com",
    tags: ["Node.js", "Performance", "Backend"],
  },
  {
    title: "Full-Stack App Boilerplate",
    description:
      "Production-ready full-stack application template with authentication, database, and API structure.",
    type: "Repository",
    url: "https://github.com",
    tags: ["Full Stack", "Template", "Boilerplate"],
  },
  {
    title: "CSS Grid Mastery",
    description:
      "Complete guide to CSS Grid with interactive examples and real-world layout patterns.",
    type: "Article",
    url: "https://example.com",
    tags: ["CSS", "Frontend", "Layout"],
  },
  {
    title: "PostgreSQL Query Optimization",
    description:
      "Advanced techniques for optimizing PostgreSQL queries and improving database performance.",
    type: "Tutorial",
    url: "https://example.com",
    tags: ["PostgreSQL", "Database", "Performance"],
  },
];

const resourceTypes = [
  "All",
  "Article",
  "Repository",
  "Tutorial",
  "Video",
  "Tool",
];
---

<Layout
  title="Resources - Nikolaos Flabouris"
  description="Curated collection of articles, repositories, tutorials, videos, and tools for software engineers."
>
  <Navigation />

  <main>
    <section class="section">
      <div class="container">
        <div class="section-title">
          <h1>Resources</h1>
          <p>Curated collection of valuable development resources</p>
        </div>

        <div class="filters">
          <div class="filter-buttons">
            {
              resourceTypes.map((type) => (
                <button
                  class={`filter-btn ${type === "All" ? "active" : ""}`}
                  data-filter={type}
                >
                  {type}
                </button>
              ))
            }
          </div>
          <div class="search-box">
            <input
              type="text"
              id="search-input"
              placeholder="Search resources..."
              aria-label="Search resources"
            />
          </div>
        </div>

        <div class="resources-grid grid grid-3" id="resources-grid">
          {resources.map((resource) => <ResourceCard {...resource} />)}
        </div>

        <div id="no-results" class="no-results" style="display: none;">
          <p>No resources found matching your criteria.</p>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<style>
  main {
    flex: 1;
  }

  .filters {
    margin-bottom: 3rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .filter-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    justify-content: center;
  }

  .filter-btn {
    padding: 0.5rem 1.25rem;
    border-radius: 0.5rem;
    border: 1px solid var(--border-color);
    background-color: var(--bg-card);
    color: var(--text-secondary);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.95rem;
  }

  .filter-btn:hover {
    background-color: var(--bg-secondary);
    border-color: var(--accent-blue);
    color: var(--accent-blue);
  }

  .filter-btn.active {
    background: linear-gradient(
      135deg,
      var(--accent-blue),
      var(--accent-purple)
    );
    color: white;
    border-color: transparent;
  }

  .search-box {
    max-width: 500px;
    margin: 0 auto;
    width: 100%;
  }

  #search-input {
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: 0.5rem;
    border: 1px solid var(--border-color);
    background-color: var(--bg-card);
    color: var(--text-primary);
    font-size: 1rem;
    transition: all 0.3s ease;
  }

  #search-input:focus {
    outline: none;
    border-color: var(--accent-blue);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  #search-input::placeholder {
    color: var(--text-muted);
  }

  .resources-grid {
    min-height: 400px;
  }

  .no-results {
    text-align: center;
    padding: 4rem 2rem;
    color: var(--text-muted);
  }

  .no-results p {
    font-size: 1.25rem;
  }

  @media (max-width: 768px) {
    .filter-buttons {
      justify-content: flex-start;
    }

    .filter-btn {
      font-size: 0.875rem;
      padding: 0.5rem 1rem;
    }
  }
</style>

<script>
  // Resource filtering and search functionality
  const filterButtons = document.querySelectorAll(".filter-btn");
  const searchInput = document.getElementById(
    "search-input"
  ) as HTMLInputElement;
  const resourceCards = document.querySelectorAll(".resource-card");
  const noResults = document.getElementById("no-results");

  let activeFilter = "All";
  let searchTerm = "";

  function filterResources() {
    let visibleCount = 0;

    resourceCards.forEach((card) => {
      const cardElement = card as HTMLElement;
      const type = cardElement.dataset.type || "";
      const tags = cardElement.dataset.tags || "";
      const title =
        cardElement.querySelector(".resource-title")?.textContent || "";
      const description =
        cardElement.querySelector(".resource-description")?.textContent || "";

      const matchesFilter = activeFilter === "All" || type === activeFilter;
      const matchesSearch =
        searchTerm === "" ||
        title.toLowerCase().includes(searchTerm) ||
        description.toLowerCase().includes(searchTerm) ||
        tags.toLowerCase().includes(searchTerm);

      if (matchesFilter && matchesSearch) {
        cardElement.style.display = "flex";
        visibleCount++;
      } else {
        cardElement.style.display = "none";
      }
    });

    if (noResults) {
      noResults.style.display = visibleCount === 0 ? "block" : "none";
    }
  }

  // Filter button click handlers
  filterButtons.forEach((button) => {
    button.addEventListener("click", () => {
      filterButtons.forEach((btn) => btn.classList.remove("active"));
      button.classList.add("active");
      activeFilter = button.getAttribute("data-filter") || "All";
      filterResources();
    });
  });

  // Search input handler
  if (searchInput) {
    searchInput.addEventListener("input", (e) => {
      searchTerm = (e.target as HTMLInputElement).value.toLowerCase();
      filterResources();
    });
  }
</script>
